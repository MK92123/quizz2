<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quiz Air France</title>
  <style>
    :root {
      --bg: #f6f7fb;
      --card: #ffffff;
      --txt: #111827;
      --muted: #6b7280;
      --ok: #0f766e;
      --bad: #b91c1c;
      --pri: #0a66ff;
    }
    body {
      margin: 0; padding: 2rem;
      background: var(--bg);
      color: var(--txt);
      font: 16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Arial;
    }
    .wrap {
      max-width: 980px;
      margin: 0 auto;
      background: var(--card);
      border-radius: 16px;
      box-shadow: 0 8px 24px rgba(0,0,0,.06);
      padding: 24px;
    }
    header { display: flex; flex-direction: column; align-items: center; gap: .35rem; margin-bottom: 8px; }
    header img { max-width: 220px; height: auto; display: block; }
    h1 { margin: 4px 0 0; text-align: center; }
    .sub {
      color: var(--muted);
      text-align: center;
      margin: 6px 0 12px;
      display: flex;
      gap: 12px;
      justify-content: center;
      flex-wrap: wrap;
    }
    .pill { background: #eef2ff; color: #1e3a8a; border-radius: 999px; padding: 4px 10px; font-size: .9rem; }
    .progress { height: 10px; background: #e5e7eb; border-radius: 99px; overflow: hidden; margin: 8px 0 18px; }
    .bar { height: 100%; width: 0; background: var(--pri); transition: width .25s; }
    .q { font-weight: 700; margin: 10px 0 12px; }
    ul { list-style: none; padding: 0; margin: 0; }
    li { margin: .4rem 0; }
    label { display: flex; gap: .6rem; align-items: flex-start; cursor: pointer; }
    input[type=radio], input[type=checkbox] { margin-top: .25rem; }
    .feed { display: none; margin-top: 12px; border-radius: 10px; padding: 10px; }
    .ok { display: block; background: #e7f7f3; color: #065f46; }
    .bad { display: block; background: #fdeaea; color: #7f1d1d; }
    .row { display: flex; gap: 10px; justify-content: space-between; margin-top: 16px; flex-wrap: wrap; }
    button { border: 0; border-radius: 10px; padding: 10px 14px; cursor: pointer; font-weight: 600; }
    #next { background: var(--pri); color: #fff; }
    #next:disabled { opacity: .5; cursor: not-allowed; }
    #reset { background: #6b7280; color: #fff; }
    .score { margin-top: 8px; text-align: center; color: var(--muted); }
    footer { margin-top: 18px; text-align: center; color: var(--muted); font-size: .9rem; }
    .timeup { color: #b91c1c; font-weight: 700; }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <img src="https://static.vecteezy.com/system/resources/previews/009/387/270/original/maintenance-icon-simple-solid-style-tool-wrench-and-screwdriver-spanner-sign-home-services-concept-glyph-illustration-symbol-element-isolated-on-white-background-eps-10-vector.jpg" onerror="this.style.display='none'">
      <h1>Quiz Air France</h1>
    </header>
    <header>
      <p id="disclaimer" style="
        font-size: 0.9rem;
        color: #b91c1c;
        background-color: #fee2e2;
        border: 1px solid #b91c1c;
        padding: 8px 12px;
        border-radius: 8px;
        max-width: 100%;
        text-align: center;
        margin-bottom: 12px;
        font-weight: 700;
      ">
        Maintenance en cours, le quizz est en cours de création 30 questions sont en cours de création, vous pouvez commencer à le faire, progressivement, les questions seront ajoutées.
      </p>
      <img src="..." alt="Air France Logo" onerror="this.style.display='none'">
      <h1>Quiz Air France</h1>
    </header>

    <div class="sub">
      <span id="meta" class="pill"></span>
      <span id="timer" class="pill">Temps restant : 30:00</span>
      <span id="liveScore" class="pill"></span>
    </div>
    <div class="progress"><div id="bar" class="bar"></div></div>
    <div id="quiz"></div>
    <div class="row">
  <button id="reset" onclick="resetQuiz()">Recommencer (nouvel ordre)</button>
  <button id="menu" onclick="window.location.href='https://mk92123.github.io/quizz-airfrance2/index'">
    Retourner au menu principal
  </button>
  <button id="next" onclick="nextQ()" disabled>Suivant</button>
</div>
    
    <footer>Version 5.0 — ordre aléatoire • multi-clic: correction puis suivant • chrono 30:00</footer>
  </div>

<script>
const BASE = [
  {t:"Un client accompagné d'un bébé peut voyager avec un SVAN?", o:["Oui","Non"], c:[1], e:"Non"},
  {t:"Quels sont les clients autorisé à acheter un surclassement La première?", o:["Tous les clients munis d'un billet Business","Tout le monde peu importe la catégorie de client","Les platinum, Gold, Ultimate"], c:[0], e:"Tous les clients munis d'un billet Business sont éligibles sauf les clients voyageant avec un bébé."},
  {t:"L'offre Cash&Miles lors de l'achat d'un suclassement La Première est-il permis?", o:["Non","Oui","Oui Uniquement pour les clients platinum et de niveaux supérieurs","Oui uniquement pour les clients Platinum"], c:[2], e:"L'offre miles et cash &m miles n'est disponible que pour nos clients Platinum et de niveaux supérieurs cela afin de garder une cohérence avec les règles des billets primes et surclassements primes"},
  {t:"Sur LC j'annule à H-20?", o:["Si j'ai - de 15 PAX manquants","Si j'ai - de 8 PAX manquants","Si j'ai - de 10 pax manquants"], c:[2], e:"L'annulation sur vol LC se fait à H-20, si il y a moins de 10 PAX manquants j'annule, s'il y a plus de 10 PAX je ctc le TST pour analyse de la situation"},
  {t:"A l'embarquement d'un vol LC je lance le pré embarquement:", o:["A l'heure du jalon prévu","10 minutes après ARV BUS PN A L'AVION","Dès que possible","Dès lors que les client PMR se présentent en porte"], c:[1], e:"L'embarquement doit être lancé selon la procédure 10 minutes après l'arrivée de l'équipage"},
  {t:"Sur un vol prio ou First Flight LC j'annule:", o:["A H-20 s'il y a moins de 10 pax mqts","A H-25 s'il y a moins de 10 pax mqts","A H-20 s'il y a moins de 15 pax mqts","A H-25 s'il y a moins de 15 pax mqts"], c:[2], e:"L'annulation sur VOL PRIO LC s'effectue a H-20 s'il y a moins de 15 PAX mqts."},
  {t:"Le TST c'est:", o:["Technicien de la supervision touchée","Le PCC","Technicien Masse et centrage", "Le CCP"], c:[0,1], e:"Le TST c'est le technicien de la supérvision touchée, appelée aussi PCC"},
  {t:"La NPO First s'applique sur ", o:["La P1","La P2","La P3","La P4"], c:[1], e:"NPO First Flight = La P1 de 5h05 à 8h50, il s'agit des premier vol de la journée, pouvant donc impacté les rotations, ils doivent faire l'objet d'une politique oppérationnelle (NPO) spécifique c'est à dire annulation H-20 si - de 15 pax mqts"},
  {t:"Les Silver on le droit à :", o:["1 Bagage supplémentaire sur les vols de la skyteam","3 Bagage supplémentaire sur les vols de la skyteam","0 Bagage supplémentaire sur les vols de la skyteam","2 Bagage supplémentaire sur les vols de la skyteam"], c:[0], e:"Silver = 1 bagage supplémentaire sur les vols de la skyteam"},
  {t:"Les Gold on le droit à :", o:["1 Bagage supplémentaire sur les vols de la skyteam","3 Bagage supplémentaire sur les vols de la skyteam","0 Bagage supplémentaire sur les vols de la skyteam","2 Bagage supplémentaire sur les vols de la skyteam"], c:[0], e:"Gold = 1 bagage supplémentaire sur les vols de la skyteam"},
  {t:"Les Platinum on le droit à :", o:["1 Bagage supplémentaire sur les vols de la skyteam","3 Bagage supplémentaire sur les vols de la skyteam","0 Bagage supplémentaire sur les vols de la skyteam","2 Bagage supplémentaire sur les vols de la skyteam"], c:[3], e:"Platinum = 2 bagages supplémentaires sur les vols de la skyteam"},
  {t:"Les Ultimates on le droit à :", o:["1 Bagage supplémentaire sur les vols de la skyteam","3 Bagage supplémentaire sur les vols de la skyteam","0 Bagage supplémentaire sur les vols de la skyteam","2 Bagage supplémentaire sur les vols de la skyteam"], c:[3], e:"Ultimates = 2 bagages supplémentaires sur les vols de la skyteam"},
  {t:"Un client R1 peut-il acheter un accès au Lounge AF CDG?", o:["Oui","Non"], c:[0], e:"Oui, depuis le 23 Juin 2025"},
  {t:"Je vois si un client R1 est éligible au salon avec la mention sur Altéa :", o:["SKPO","CTCM","EASB","ACSL"], c:[3], e:"C'est la mention ASCL"},
  {t:"L'achat d'un DOD en la première donne-t-il le droit à un invité au salon?", o:["Oui","Non"], c:[1], e:"Non"},
  {t:"Un client voyageant sur le vol AF564, quota ME, se présente avec un bagage de 30KG un $ s'affiche je :", o:["Waive","Fais payer un supplément","Waive DISCREPANCY INTERLIGNES", "Waive DISCREPANCY RESERVATION"], c:[0,3], e:"Quota ME sur vol AF 564 BEY, autorisé jusqu'à 2x30KG. WAIVE DISCREPANCY RESERVATION"},
  {t:"Pour 1 bagage compris entre 23,5 et 23,9 je waive avec : ", o:["TOLERANCE 1KG","TOLERANCE POOL AFRICA","COM EMPOWERMENT"], c:[0], e:"TOLERANCE 1KG"},
  {t:"Tarif Salon pour un CHILD", o:["90 euros","68 euros","18 000 miles","13 600 miles"], c:[1,3], e:"Pour les enfants - 12 ans, dit CHILD tarif : 68 euros ou 13 600 miles"},
  {t:"Cas d'excemption complément tarifaire : Le levé de séquence est autorisé:", o:["Si le client a anticipé sa correspondance","Si il a anticipé sa correspondance le temps de correspondance ne doit pas depasser 24h","Le client présente un mémo voyage ou facture du billet","Le billet prit doit être 057 ou 074"], c:[0,1,2,3], e:"Toutes les réponses sont bonnes, les conditions sont cumulatives."},
  {t:"Cas particulier liaison ZYR-CDG, si le client a anticipé sa correspondance par train, je lève la séquence si :", o:["Présentation d'une facture prouvant l'achat d'un billet de train ou de bus ZYR-PAR","Présentation d'une facture de location de voiture ou taxis pour effectuer ZYR-CDG", "Justificatif d'une amende payé à bord d'un train ZYR-CDG","Présentation d'un selfie à bord du train ZYR-CDG","Si le trajet est effectué 24H précédent la correspondance"], c:[0,1,2,4], e:"Le client doit présenter une facture recouvrant l'achat billet train/bus ZYR-CDG, facture location taxi/voiture ZYR-CDG ou une amende payé à bord du train ZYR-CDG"}
];

// =====================
// Utilitaires
// =====================
function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

// Mélange options et recalcule les index corrects
function shuffleOptions(q) {
  const pairs = q.o.map((text, idx) => ({ text, idx }));
  shuffle(pairs);
  q.o = pairs.map(p => p.text);
  const newC = [];
  pairs.forEach((p, newIdx) => { if (q.c.includes(p.idx)) newC.push(newIdx); });
  q.c = newC.sort((a,b)=>a-b);
  return q;
}

// =====================
// État
// =====================
let Q = [];
let i = 0;
let score = 0;
let timer = 30 * 60;
let ticker = null;
let currentSel = new Set();
let phase = "answer"; // 'answer' -> corriger; 'review' -> passer à la suivante

// =====================
// Démarrage / rendu
// =====================
function initQuiz() {
  Q = BASE.map(q => ({ t: q.t, o: [...q.o], c: [...q.c], e: q.e })).map(shuffleOptions);
  shuffle(Q);
  i = 0; score = 0; currentSel = new Set(); phase = "answer";
  document.getElementById('next').disabled = true;
  render();
  startTimer();
}

function render() {
  const bar = document.getElementById('bar');
  const meta = document.getElementById('meta');
  const sc = document.getElementById('liveScore');
  const qn = Q[i];
  const total = Q.length;

  meta.textContent = `Question ${i + 1} / ${total}`;
  bar.style.width = `${Math.round((i / total) * 100)}%`;
  sc.textContent = `Score : ${score} / ${total}`;

  const isMulti = qn.c.length > 1;
  const inputType = isMulti ? 'checkbox' : 'radio';

  let wrap = `<div class="q">${qn.t}${isMulti ? " <span style='color:#6b7280;font-weight:400'>(plusieurs réponses)</span>" : ""}</div><ul>`;
  qn.o.forEach((opt, idx) => {
    wrap += `
      <li>
        <label>
          <input type="${inputType}" name="opt${i}" value="${idx}" onclick="toggleSel(${idx})">
          ${opt}
        </label>
      </li>`;
  });
  wrap += `</ul><div id="feed" class="feed"></div>`;

  document.getElementById('quiz').innerHTML = wrap;
  phase = "answer";
  document.getElementById('next').textContent = "Suivant";
  document.getElementById('next').disabled = true;
  updateTimerUI();
}

function toggleSel(idx) {
  const input = document.querySelector(`input[name="opt${i}"][value="${idx}"]`);
  if (input.type === "radio") {
    currentSel = new Set([idx]);
  } else {
    if (input.checked) currentSel.add(idx); else currentSel.delete(idx);
  }
  document.getElementById('next').disabled = currentSel.size === 0;
}

// =====================
// Suivant: correction puis avance
// =====================
function nextQ() {
  const qn = Q[i];
  const feed = document.getElementById('feed');

  if (phase === "answer") {
    if (currentSel.size === 0) {
      alert("Choisis au moins une réponse.");
      return;
    }
    // correction
    const correct = new Set(qn.c);
    let ok = (currentSel.size === correct.size);
    if (ok) {
      for (const v of currentSel) if (!correct.has(v)) { ok = false; break; }
    }

    if (ok) {
      score++;
      feed.className = 'feed ok';
      feed.textContent = `Bonne réponse. ${qn.e}`;
    } else {
      feed.className = 'feed bad';
      const corrLabels = qn.c.map(idx => `"${qn.o[idx]}"`).join(", ");
      feed.innerHTML = `Mauvaise réponse. Bonnes réponses : ${corrLabels}. ${qn.e}`;
    }
    document.getElementById('liveScore').textContent = `Score : ${score} / ${Q.length}`;

    // verrouiller les inputs
    document.querySelectorAll(`input[name="opt${i}"]`).forEach(el => el.disabled = true);

    // passer en phase review
    phase = "review";
    document.getElementById('next').textContent = "Continuer";
    document.getElementById('next').disabled = false;
    return;
  }

  // phase === 'review' -> passer à la question suivante
  i++;
  currentSel = new Set();
  if (i < Q.length) render();
  else finish();
}

// =====================
// Timer & fin
// =====================
function resetQuiz() {
  stopTimer();
  timer = 30 * 60;
  initQuiz();
}

function finish() {
  stopTimer();
  const total = Q.length;
  const pct = Math.round(100 * score / total);
  document.getElementById('bar').style.width = '100%';
  document.getElementById('meta').textContent = 'Terminé ✅';
  document.getElementById('quiz').innerHTML = `
    <div class="q">Bravo ! Tu as terminé le quiz.</div>
    <p class="score">Score final : <strong>${score}/${total}</strong> (${pct}%).</p>
    <p>Tu peux cliquer sur “Recommencer (nouvel ordre)” pour rejouer.</p>`;
  document.getElementById('next').disabled = true;
  document.getElementById('liveScore').textContent = `Score final : ${score} / ${total} (${pct}%)`;
}

function startTimer() {
  stopTimer();
  ticker = setInterval(() => {
    timer--;
    if (timer <= 0) {
      document.getElementById('timer').classList.add('timeup');
      document.getElementById('timer').textContent = "Temps écoulé";
      finish();
    } else {
      updateTimerUI();
    }
  }, 1000);
}

function stopTimer() {
  if (ticker) { clearInterval(ticker); ticker = null; }
}

function updateTimerUI() {
  const m = Math.floor(timer / 60);
  const s = timer % 60;
  document.getElementById('timer').textContent =
    `Temps restant : ${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}`;
}

// =====================
// Mot de passe & lancement
// =====================
function askPassword() {
  const pass = prompt("Entrez le mot de passe pour accéder au quiz :");
  if (pass === "AF2025") {
    initQuiz();
  } else {
    alert("Mot de passe incorrect. Accès refusé.");
    document.getElementById('quiz').innerHTML =
      "<p style='color:red; text-align:center; font-weight:bold;'>Accès refusé : mot de passe incorrect.</p>";
    document.getElementById('next').disabled = true;
    document.getElementById('reset').disabled = true;
    document.getElementById('meta').textContent = '';
    document.getElementById('timer').textContent = '';
    document.getElementById('liveScore').textContent = '';
  }
}

askPassword();
</script>

</body>
</html>
